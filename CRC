
#include <stdio.h>
#include <string.h>
char data[50], divisor[20], rem[20];
int dl, pl;
void XOR(){
for(int i=1;i<pl;i++){
rem[i]=(rem[i]==divisor[i])?'0':'1';
}
}
void crc(){
int i=0,j;
while(i<pl){
rem[i]=data[i];
i++;
}
while(i<dl+pl-1){
if(rem[0]=='1'){
XOR();
}
for(j=0;j<pl-1;j++){
rem[j]=rem[j+1];
}
rem[j]=data[i];
i++;
}
if(rem[0]=='1'){
XOR();
}
for(int k=0;k<pl-1;k++){
rem[k]=rem[k+1];
}
rem[pl-1]='\0';
}
void receiver(){
printf("Enter received data: ");
scanf("%s",data);
dl=strlen(data);
crc();
printf("Remainder = %s\n",rem);
for(int i=0;i<pl-1;i++){
if(rem[i]=='1'){
printf("Error detected\n");
return;
}
}
printf("No error detected\n");
}
int main(){
int i;
printf("Enter data: ");
scanf("%s",data);
printf("Enter divisor: ");
scanf("%s",divisor);
dl=strlen(data);
pl=strlen(divisor);
for(i=dl;i<dl+pl-1;i++){
data[i]='0';
}
data[i]='\0';
printf("Padded = %s\n",data);
crc();
printf("CRC = %s\n",rem);
int k=0;
for(i=dl;i<dl+pl-1;i++){
data[i]=rem[k++];
}
data[i]='\0';
printf("Final dataword = %s\n",data);
receiver();
return 0;
}
